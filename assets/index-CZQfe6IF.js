import{H as V,al as m,o as y,d as L,r as k,e as O,m as E,c as b,Q as n,I as f,a,O as C,E as R,w as q,ah as B,K as F,P as K,a5 as U,M as x,D as J,u as j,au as H}from"./@vue-DgbHzdzK.js";import{E as N,i as Q}from"./element-plus-BQCXvAai.js";import{u as G,a as M,c as W,b as X}from"./vue-router-CZoGHokl.js";import{Q as Y}from"./@element-plus-BfY-XubT.js";import"./lodash-es-C-8JW18d.js";import"./@vueuse-C4F-RBQi.js";import"./@popperjs-DB1lLFnh.js";import"./@ctrl-BuyEbX8F.js";import"./dayjs-DVKSwKij.js";import"./async-validator-Cp9QasH9.js";import"./memoize-one-BdPwpGay.js";import"./normalize-wheel-es-BikNlmlf.js";import"./@floating-ui-BiT_2Uhe.js";(function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver(e=>{for(const o of e)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function p(e){const o={};return e.integrity&&(o.integrity=e.integrity),e.referrerPolicy&&(o.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?o.credentials="include":e.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(e){if(e.ep)return;e.ep=!0;const o=p(e);fetch(e.href,o)}})();const Z={__name:"App",setup(g){return(c,p)=>{const s=m("router-view");return y(),V(s)}}},ee={class:"calendar-container"},te=["onClick"],oe={class:"calendar-date"},ne=L({__name:"rili",setup(g){const c=G(),p=k(new Date),s=()=>{try{const d=localStorage.getItem("todoList");if(!d)return[];const u=JSON.parse(d);return Array.isArray(u)?u:[]}catch(d){return console.error("读取待办数据失败",d),[]}},e=O(()=>{const d=s(),u={},_=d.reduce((l,w)=>(l[w.date]||(l[w.date]=[]),l[w.date].push(w),l),{});return Object.keys(_).forEach(l=>{const T=_[l].every(t=>t.completed);u[l]=T?"finished":"unfinished"}),u}),o=d=>{const u=new Intl.DateTimeFormat("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit"}).format(new Date(d)).replace(/\//g,"-"),_=e.value[u];return _==="unfinished"?"marker-red":_==="finished"?"marker-green":""},i=d=>{if(d.disabled)return;const u=new Intl.DateTimeFormat("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit"}).format(new Date(d.day)).replace(/\//g,"-");c.push({path:"/event",query:{date:u}})};return E(()=>{window.addEventListener("storage",()=>{e.value={...e.value}})}),(d,u)=>{const _=m("el-calendar");return y(),b("div",ee,[n(_,{modelValue:p.value,"onUpdate:modelValue":u[0]||(u[0]=l=>p.value=l)},{"date-cell":f(({data:l})=>[a("div",{class:"calendar-cell",onClick:w=>i(l)},[a("span",oe,C(l.day.split("-").pop()),1),a("div",{class:R(["todo-marker",o(l.day)])},null,2)],8,te)]),_:1},8,["modelValue"])])}}}),z=(g,c)=>{const p=g.__vccOpts||g;for(const[s,e]of c)p[s]=e;return p},se=z(ne,[["__scopeId","data-v-c4996e88"]]),re={class:"todo-container"},ae={class:"todo-header"},le={class:"todo-add"},ce={class:"todo-debug"},ie={class:"progress-container"},de={class:"main-progress"},ue={class:"sample-progress-group"},me={class:"sample-progress-item"},pe={class:"sample-progress-item"},_e={class:"sample-progress-item"},fe={class:"sample-progress-item"},ge={class:"todo-list"},he={key:0,class:"todo-empty"},ve=L({__name:"event",setup(g){const c=()=>{try{const t=localStorage.getItem("todoList");if(!t)return[];const r=JSON.parse(t);return Array.isArray(r)?r.map(h=>({id:h.id||Date.now().toString(),title:h.title||"",completed:!!h.completed,date:h.date||""})):[]}catch(t){return console.error("读取待办数据失败",t),[]}},p=t=>{try{localStorage.setItem("todoList",JSON.stringify(t))}catch(r){console.error("保存待办数据失败",r)}},s=M(),e=k(new Intl.DateTimeFormat("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit"}).format(new Date).replace(/\//g,"-")),o=k(""),i=k(c()),d=O(()=>i.value.filter(t=>t.date===e.value)),u=O(()=>{const t=d.value;if(t.length===0)return 0;const r=t.filter(h=>h.completed).length;return Math.round(r/t.length*100)}),_=t=>t===100?"满":`${t}%`,l=t=>t===25?"#4fc3f7":t===50?"#2196f3":t===75?"#1976d2":t===100?"#67c23a":"#646cff";E(()=>{s.query.date&&typeof s.query.date=="string"&&(e.value=s.query.date.replace(/\//g,"-")),p(i.value)});const w=()=>{const t=o.value.trim();if(!t){N.warning("请输入有效的待办标题！");return}const r={id:Date.now().toString(),title:t,completed:!1,date:e.value};i.value.unshift(r),o.value="",N.success("待办添加成功！")},T=t=>{const r=i.value.findIndex(h=>h.id===t);r>-1&&(i.value.splice(r,1),N.info("待办已删除！"))};return q(i,t=>{console.log("待办列表变化：",t),p(t)},{deep:!0}),(t,r)=>{const h=m("el-input"),I=m("el-button"),D=m("el-progress"),P=m("el-empty"),A=m("el-checkbox");return y(),b("div",re,[a("div",ae,[a("h2",null,C(e.value)+" 待办事项",1)]),a("div",le,[n(h,{modelValue:o.value,"onUpdate:modelValue":r[0]||(r[0]=v=>o.value=v),placeholder:"请输入待办事件",class:"todo-input",onKeyup:B(w,["enter"])},null,8,["modelValue"]),n(I,{type:"primary",onClick:w},{default:f(()=>[...r[1]||(r[1]=[x("添加",-1)])]),_:1})]),a("div",ce," 待办总数："+C(d.value.length)+" | 当前日期："+C(e.value)+" | 完成率："+C(u.value)+"% ",1),a("div",ie,[a("div",de,[r[2]||(r[2]=a("span",{class:"progress-label"},"今日完成率：",-1)),n(D,{percentage:u.value,format:_,class:"full-width-progress",color:l(u.value)},null,8,["percentage","color"])]),a("div",ue,[a("div",me,[n(D,{percentage:25,format:_,color:l(25)},null,8,["color"])]),a("div",pe,[n(D,{percentage:50,format:_,color:l(50)},null,8,["color"])]),a("div",_e,[n(D,{percentage:75,format:_,color:l(75)},null,8,["color"])]),a("div",fe,[n(D,{percentage:100,status:"success",format:_})])])]),a("div",ge,[d.value.length===0?(y(),b("div",he,[n(P,{description:"暂无待办，添加一个吧～"})])):F("",!0),(y(!0),b(K,null,U(d.value,(v,$e)=>(y(),b("div",{class:"todo-item",key:v.id},[n(A,{modelValue:v.completed,"onUpdate:modelValue":$=>v.completed=$,size:"large",onChange:$=>t.handleComplete(v.id)},null,8,["modelValue","onUpdate:modelValue","onChange"]),a("span",{class:"todo-title",style:J({textDecoration:v.completed?"line-through":"none",color:v.completed?"#909399":"#303133"})},C(v.title),5),n(I,{type:"danger",size:"small",icon:"el-icon-delete",onClick:$=>T(v.id)},{default:f(()=>[...r[3]||(r[3]=[x(" 删除 ",-1)])]),_:1},8,["onClick"])]))),128))])])}}}),ye=z(ve,[["__scopeId","data-v-ba85d9ad"]]),we={class:"f-header"},be={class:"logo"},Ce={__name:"Fheader",setup(g){const c=()=>location.reload();return(p,s)=>{const e=m("Management"),o=m("el-icon"),i=m("Refresh");return y(),b("div",we,[a("span",be,[n(o,{class:"mr-1",size:30},{default:f(()=>[n(e)]),_:1}),s[0]||(s[0]=a("span",{class:"flex-1 mr-2"}," 日历与待办事件 ",-1)),n(o,{class:"icon-btn",onClick:c},{default:f(()=>[n(i)]),_:1})])])}}},De={__name:"FtagNav",setup(g){const c=M();return(p,s)=>{const e=m("el-breadcrumb-item"),o=m("el-breadcrumb");return y(),V(o,{separator:"/"},{default:f(()=>[n(e,{to:{path:"/"}},{default:f(()=>[...s[0]||(s[0]=[x("日历",-1)])]),_:1}),j(c)?.path==="/event"?(y(),V(e,{key:0,to:{path:"/event"}},{default:f(()=>[...s[1]||(s[1]=[x(" 待办事件 ",-1)])]),_:1})):F("",!0)]),_:1})}}},ke={class:"common-layout"},xe={__name:"admin",setup(g){return(c,p)=>{const s=m("el-header"),e=m("router-view"),o=m("el-main"),i=m("el-container");return y(),b("div",ke,[n(i,null,{default:f(()=>[n(s,null,{default:f(()=>[n(Ce)]),_:1}),n(i,null,{default:f(()=>[n(o,null,{default:f(()=>[n(De),n(e)]),_:1})]),_:1})]),_:1})])}}},Se=[{path:"/",component:xe,redirect:"/rili",children:[{path:"/rili",component:se},{path:"/event",component:ye}]}],Te=W({history:X("/"),routes:Se}),S=H(Z);for(const[g,c]of Object.entries(Y))S.component(g,c);S.use(Q);S.use(Te);S.mount("#app");
